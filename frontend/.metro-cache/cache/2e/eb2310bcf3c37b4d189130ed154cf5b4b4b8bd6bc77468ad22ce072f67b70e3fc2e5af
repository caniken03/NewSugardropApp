{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":44,"index":204}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${storedToken}`;\n        }\n      } catch (error) {\n        console.error('Error loading stored auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesApi.apiClient.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${access_token}`;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    };\n    const register = async (email, password, name, dailyGoal = 50) => {\n      try {\n        const response = await _servicesApi.apiClient.post('/auth/register', {\n          email,\n          password,\n          name,\n          daily_sugar_goal: dailyGoal\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${access_token}`;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        console.error('Registration error:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        setUser(null);\n        setToken(null);\n        delete _servicesApi.apiClient.defaults.headers.Authorization;\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"uAkFQMmIUxfxJcQTEb8tCM/KFt4=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":130,"map":[[15,2,28,0,"exports"],[15,9,28,0],[15,10,28,0,"AuthProvider"],[15,22,28,0],[15,25,28,0,"AuthProvider"],[15,37,28,0],[16,2,120,0,"exports"],[16,9,120,0],[16,10,120,0,"useAuth"],[16,17,120,0],[16,20,120,0,"useAuth"],[16,27,120,0],[17,2,1,0],[17,6,1,0,"_react"],[17,12,1,0],[17,15,1,0,"require"],[17,22,1,0],[17,23,1,0,"_dependencyMap"],[17,37,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,3,0],[20,6,3,0,"_servicesApi"],[20,18,3,0],[20,21,3,0,"require"],[20,28,3,0],[20,29,3,0,"_dependencyMap"],[20,43,3,0],[21,2,3,44],[21,6,3,44,"_reactJsxDevRuntime"],[21,25,3,44],[21,28,3,44,"require"],[21,35,3,44],[21,36,3,44,"_dependencyMap"],[21,50,3,44],[22,2,22,0],[22,8,22,6,"AuthContext"],[22,19,22,17],[22,35,22,20],[22,39,22,20,"createContext"],[22,45,22,33],[22,46,22,33,"createContext"],[22,59,22,33],[22,61,22,63,"undefined"],[22,70,22,72],[22,71,22,73],[23,2,28,7],[23,11,28,16,"AuthProvider"],[23,23,28,28,"AuthProvider"],[23,24,28,29],[24,4,28,31,"children"],[25,2,28,59],[25,3,28,60],[25,5,28,62],[26,4,28,62,"_s"],[26,6,28,62],[27,4,29,2],[27,10,29,8],[27,11,29,9,"user"],[27,15,29,13],[27,17,29,15,"setUser"],[27,24,29,22],[27,25,29,23],[27,28,29,26],[27,32,29,26,"useState"],[27,38,29,34],[27,39,29,34,"useState"],[27,47,29,34],[27,49,29,48],[27,53,29,52],[27,54,29,53],[28,4,30,2],[28,10,30,8],[28,11,30,9,"token"],[28,16,30,14],[28,18,30,16,"setToken"],[28,26,30,24],[28,27,30,25],[28,30,30,28],[28,34,30,28,"useState"],[28,40,30,36],[28,41,30,36,"useState"],[28,49,30,36],[28,51,30,52],[28,55,30,56],[28,56,30,57],[29,4,31,2],[29,10,31,8],[29,11,31,9,"loading"],[29,18,31,16],[29,20,31,18,"setLoading"],[29,30,31,28],[29,31,31,29],[29,34,31,32],[29,38,31,32,"useState"],[29,44,31,40],[29,45,31,40,"useState"],[29,53,31,40],[29,55,31,41],[29,59,31,45],[29,60,31,46],[30,4,33,2],[30,8,33,2,"useEffect"],[30,14,33,11],[30,15,33,11,"useEffect"],[30,24,33,11],[30,26,33,12],[30,32,33,18],[31,6,34,4,"loadStoredAuth"],[31,20,34,18],[31,21,34,19],[31,22,34,20],[32,4,35,2],[32,5,35,3],[32,7,35,5],[32,9,35,7],[32,10,35,8],[33,4,37,2],[33,10,37,8,"loadStoredAuth"],[33,24,37,22],[33,27,37,25],[33,33,37,25,"loadStoredAuth"],[33,34,37,25],[33,39,37,37],[34,6,38,4],[34,10,38,8],[35,8,39,6],[35,14,39,12,"storedToken"],[35,25,39,23],[35,28,39,26],[35,34,39,32,"AsyncStorage"],[35,46,39,44],[35,47,39,44,"default"],[35,54,39,44],[35,55,39,45,"getItem"],[35,62,39,52],[35,63,39,53],[35,70,39,60],[35,71,39,61],[36,8,40,6],[36,14,40,12,"storedUser"],[36,24,40,22],[36,27,40,25],[36,33,40,31,"AsyncStorage"],[36,45,40,43],[36,46,40,43,"default"],[36,53,40,43],[36,54,40,44,"getItem"],[36,61,40,51],[36,62,40,52],[36,68,40,58],[36,69,40,59],[37,8,42,6],[37,12,42,10,"storedToken"],[37,23,42,21],[37,27,42,25,"storedUser"],[37,37,42,35],[37,39,42,37],[38,10,43,8,"setToken"],[38,18,43,16],[38,19,43,17,"storedToken"],[38,30,43,28],[38,31,43,29],[39,10,44,8,"setUser"],[39,17,44,15],[39,18,44,16,"JSON"],[39,22,44,20],[39,23,44,21,"parse"],[39,28,44,26],[39,29,44,27,"storedUser"],[39,39,44,37],[39,40,44,38],[39,41,44,39],[40,10,45,8,"apiClient"],[40,22,45,17],[40,23,45,17,"apiClient"],[40,32,45,17],[40,33,45,18,"defaults"],[40,41,45,26],[40,42,45,27,"headers"],[40,49,45,34],[40,50,45,35,"Authorization"],[40,63,45,48],[40,66,45,51],[40,76,45,61,"storedToken"],[40,87,45,72],[40,89,45,74],[41,8,46,6],[42,6,47,4],[42,7,47,5],[42,8,47,6],[42,15,47,13,"error"],[42,20,47,18],[42,22,47,20],[43,8,48,6,"console"],[43,15,48,13],[43,16,48,14,"error"],[43,21,48,19],[43,22,48,20],[43,50,48,48],[43,52,48,50,"error"],[43,57,48,55],[43,58,48,56],[44,6,49,4],[44,7,49,5],[44,16,49,14],[45,8,50,6,"setLoading"],[45,18,50,16],[45,19,50,17],[45,24,50,22],[45,25,50,23],[46,6,51,4],[47,4,52,2],[47,5,52,3],[48,4,54,2],[48,10,54,8,"login"],[48,15,54,13],[48,18,54,16],[48,24,54,16,"login"],[48,25,54,23,"email"],[48,30,54,36],[48,32,54,38,"password"],[48,40,54,54],[48,45,54,59],[49,6,55,4],[49,10,55,8],[50,8,56,6],[50,14,56,12,"response"],[50,22,56,20],[50,25,56,23],[50,31,56,29,"apiClient"],[50,43,56,38],[50,44,56,38,"apiClient"],[50,53,56,38],[50,54,56,39,"post"],[50,58,56,43],[50,59,56,44],[50,72,56,57],[50,74,56,59],[51,10,56,61,"email"],[51,15,56,66],[52,10,56,68,"password"],[53,8,56,77],[53,9,56,78],[53,10,56,79],[54,8,57,6],[54,14,57,12],[55,10,57,14,"access_token"],[55,22,57,26],[56,10,57,28,"user"],[56,14,57,32],[56,16,57,34,"userData"],[57,8,57,43],[57,9,57,44],[57,12,57,47,"response"],[57,20,57,55],[57,21,57,56,"data"],[57,25,57,60],[58,8,59,6,"setToken"],[58,16,59,14],[58,17,59,15,"access_token"],[58,29,59,27],[58,30,59,28],[59,8,60,6,"setUser"],[59,15,60,13],[59,16,60,14,"userData"],[59,24,60,22],[59,25,60,23],[60,8,61,6,"apiClient"],[60,20,61,15],[60,21,61,15,"apiClient"],[60,30,61,15],[60,31,61,16,"defaults"],[60,39,61,24],[60,40,61,25,"headers"],[60,47,61,32],[60,48,61,33,"Authorization"],[60,61,61,46],[60,64,61,49],[60,74,61,59,"access_token"],[60,86,61,71],[60,88,61,73],[61,8,63,6],[61,14,63,12,"AsyncStorage"],[61,26,63,24],[61,27,63,24,"default"],[61,34,63,24],[61,35,63,25,"setItem"],[61,42,63,32],[61,43,63,33],[61,50,63,40],[61,52,63,42,"access_token"],[61,64,63,54],[61,65,63,55],[62,8,64,6],[62,14,64,12,"AsyncStorage"],[62,26,64,24],[62,27,64,24,"default"],[62,34,64,24],[62,35,64,25,"setItem"],[62,42,64,32],[62,43,64,33],[62,49,64,39],[62,51,64,41,"JSON"],[62,55,64,45],[62,56,64,46,"stringify"],[62,65,64,55],[62,66,64,56,"userData"],[62,74,64,64],[62,75,64,65],[62,76,64,66],[63,6,65,4],[63,7,65,5],[63,8,65,6],[63,15,65,13,"error"],[63,20,65,18],[63,22,65,20],[64,8,66,6,"console"],[64,15,66,13],[64,16,66,14,"error"],[64,21,66,19],[64,22,66,20],[64,36,66,34],[64,38,66,36,"error"],[64,43,66,41],[64,44,66,42],[65,8,67,6],[65,14,67,12,"error"],[65,19,67,17],[66,6,68,4],[67,4,69,2],[67,5,69,3],[68,4,71,2],[68,10,71,8,"register"],[68,18,71,16],[68,21,71,19],[68,27,71,19,"register"],[68,28,71,26,"email"],[68,33,71,39],[68,35,71,41,"password"],[68,43,71,57],[68,45,71,59,"name"],[68,49,71,71],[68,51,71,73,"dailyGoal"],[68,60,71,82],[68,63,71,85],[68,65,71,87],[68,70,71,92],[69,6,72,4],[69,10,72,8],[70,8,73,6],[70,14,73,12,"response"],[70,22,73,20],[70,25,73,23],[70,31,73,29,"apiClient"],[70,43,73,38],[70,44,73,38,"apiClient"],[70,53,73,38],[70,54,73,39,"post"],[70,58,73,43],[70,59,73,44],[70,75,73,60],[70,77,73,62],[71,10,74,8,"email"],[71,15,74,13],[72,10,75,8,"password"],[72,18,75,16],[73,10,76,8,"name"],[73,14,76,12],[74,10,77,8,"daily_sugar_goal"],[74,26,77,24],[74,28,77,26,"dailyGoal"],[75,8,78,6],[75,9,78,7],[75,10,78,8],[76,8,79,6],[76,14,79,12],[77,10,79,14,"access_token"],[77,22,79,26],[78,10,79,28,"user"],[78,14,79,32],[78,16,79,34,"userData"],[79,8,79,43],[79,9,79,44],[79,12,79,47,"response"],[79,20,79,55],[79,21,79,56,"data"],[79,25,79,60],[80,8,81,6,"setToken"],[80,16,81,14],[80,17,81,15,"access_token"],[80,29,81,27],[80,30,81,28],[81,8,82,6,"setUser"],[81,15,82,13],[81,16,82,14,"userData"],[81,24,82,22],[81,25,82,23],[82,8,83,6,"apiClient"],[82,20,83,15],[82,21,83,15,"apiClient"],[82,30,83,15],[82,31,83,16,"defaults"],[82,39,83,24],[82,40,83,25,"headers"],[82,47,83,32],[82,48,83,33,"Authorization"],[82,61,83,46],[82,64,83,49],[82,74,83,59,"access_token"],[82,86,83,71],[82,88,83,73],[83,8,85,6],[83,14,85,12,"AsyncStorage"],[83,26,85,24],[83,27,85,24,"default"],[83,34,85,24],[83,35,85,25,"setItem"],[83,42,85,32],[83,43,85,33],[83,50,85,40],[83,52,85,42,"access_token"],[83,64,85,54],[83,65,85,55],[84,8,86,6],[84,14,86,12,"AsyncStorage"],[84,26,86,24],[84,27,86,24,"default"],[84,34,86,24],[84,35,86,25,"setItem"],[84,42,86,32],[84,43,86,33],[84,49,86,39],[84,51,86,41,"JSON"],[84,55,86,45],[84,56,86,46,"stringify"],[84,65,86,55],[84,66,86,56,"userData"],[84,74,86,64],[84,75,86,65],[84,76,86,66],[85,6,87,4],[85,7,87,5],[85,8,87,6],[85,15,87,13,"error"],[85,20,87,18],[85,22,87,20],[86,8,88,6,"console"],[86,15,88,13],[86,16,88,14,"error"],[86,21,88,19],[86,22,88,20],[86,43,88,41],[86,45,88,43,"error"],[86,50,88,48],[86,51,88,49],[87,8,89,6],[87,14,89,12,"error"],[87,19,89,17],[88,6,90,4],[89,4,91,2],[89,5,91,3],[90,4,93,2],[90,10,93,8,"logout"],[90,16,93,14],[90,19,93,17],[90,25,93,17,"logout"],[90,26,93,17],[90,31,93,29],[91,6,94,4],[91,10,94,8],[92,8,95,6,"setUser"],[92,15,95,13],[92,16,95,14],[92,20,95,18],[92,21,95,19],[93,8,96,6,"setToken"],[93,16,96,14],[93,17,96,15],[93,21,96,19],[93,22,96,20],[94,8,97,6],[94,15,97,13,"apiClient"],[94,27,97,22],[94,28,97,22,"apiClient"],[94,37,97,22],[94,38,97,23,"defaults"],[94,46,97,31],[94,47,97,32,"headers"],[94,54,97,39],[94,55,97,40,"Authorization"],[94,68,97,53],[95,8,98,6],[95,14,98,12,"AsyncStorage"],[95,26,98,24],[95,27,98,24,"default"],[95,34,98,24],[95,35,98,25,"removeItem"],[95,45,98,35],[95,46,98,36],[95,53,98,43],[95,54,98,44],[96,8,99,6],[96,14,99,12,"AsyncStorage"],[96,26,99,24],[96,27,99,24,"default"],[96,34,99,24],[96,35,99,25,"removeItem"],[96,45,99,35],[96,46,99,36],[96,52,99,42],[96,53,99,43],[97,6,100,4],[97,7,100,5],[97,8,100,6],[97,15,100,13,"error"],[97,20,100,18],[97,22,100,20],[98,8,101,6,"console"],[98,15,101,13],[98,16,101,14,"error"],[98,21,101,19],[98,22,101,20],[98,37,101,35],[98,39,101,37,"error"],[98,44,101,42],[98,45,101,43],[99,6,102,4],[100,4,103,2],[100,5,103,3],[101,4,105,2],[101,24,106,4],[101,28,106,4,"_reactJsxDevRuntime"],[101,47,106,4],[101,48,106,4,"jsxDEV"],[101,54,106,4],[101,56,106,5,"AuthContext"],[101,67,106,16],[101,68,106,17,"Provider"],[101,76,106,25],[102,6,107,6,"value"],[102,11,107,11],[102,13,107,13],[103,8,108,8,"user"],[103,12,108,12],[104,8,109,8,"token"],[104,13,109,13],[105,8,110,8,"login"],[105,13,110,13],[106,8,111,8,"register"],[106,16,111,16],[107,8,112,8,"logout"],[107,14,112,14],[108,8,113,8,"loading"],[109,6,114,6],[109,7,114,8],[110,6,114,8,"children"],[110,14,114,8],[110,16,115,7,"children"],[111,4,115,15],[112,6,115,15,"fileName"],[112,14,115,15],[112,16,115,15,"_jsxFileName"],[112,28,115,15],[113,6,115,15,"lineNumber"],[113,16,115,15],[114,6,115,15,"columnNumber"],[114,18,115,15],[115,4,115,15],[115,11,116,26],[115,12,116,27],[116,2,118,0],[117,2,118,1,"_s"],[117,4,118,1],[117,5,28,16,"AuthProvider"],[117,17,28,28],[118,2,28,28,"_c"],[118,4,28,28],[118,7,28,16,"AuthProvider"],[118,19,28,28],[119,2,120,7],[119,11,120,16,"useAuth"],[119,18,120,23,"useAuth"],[119,19,120,23],[119,21,120,26],[120,4,120,26,"_s2"],[120,7,120,26],[121,4,121,2],[121,10,121,8,"context"],[121,17,121,15],[121,20,121,18],[121,24,121,18,"useContext"],[121,30,121,28],[121,31,121,28,"useContext"],[121,41,121,28],[121,43,121,29,"AuthContext"],[121,54,121,40],[121,55,121,41],[122,4,122,2],[122,8,122,6,"context"],[122,15,122,13],[122,20,122,18,"undefined"],[122,29,122,27],[122,31,122,29],[123,6,123,4],[123,12,123,10],[123,16,123,14,"Error"],[123,21,123,19],[123,22,123,20],[123,67,123,65],[123,68,123,66],[124,4,124,2],[125,4,125,2],[125,11,125,9,"context"],[125,18,125,16],[126,2,126,0],[127,2,126,1,"_s2"],[127,5,126,1],[127,6,120,16,"useAuth"],[127,13,120,23],[128,2,120,23],[128,6,120,23,"_c"],[128,8,120,23],[129,2,120,23,"$RefreshReg$"],[129,14,120,23],[129,15,120,23,"_c"],[129,17,120,23],[130,0,120,23],[130,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC2B;YCK;GDE;yBEE;GFe;gBGE;GHe;mBIE;GJoB;iBKE;GLU;CDe;OOE"},"hasCjsExports":false},"type":"js/module"}]}