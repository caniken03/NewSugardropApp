{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":69,"index":159}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":160},"end":{"line":3,"column":44,"index":204}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadStoredAuth();\n    }, []);\n    const loadStoredAuth = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('token');\n        const storedUser = await AsyncStorage.default.getItem('user');\n        if (storedToken && storedUser) {\n          setToken(storedToken);\n          setUser(JSON.parse(storedUser));\n          _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${storedToken}`;\n        }\n      } catch (error) {\n        console.error('Error loading stored auth:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesApi.apiClient.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${access_token}`;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    };\n    const register = async (email, password, name, dailyGoal = 50) => {\n      try {\n        const response = await _servicesApi.apiClient.post('/auth/register', {\n          email,\n          password,\n          name,\n          daily_sugar_goal: dailyGoal\n        });\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n        setToken(access_token);\n        setUser(userData);\n        _servicesApi.apiClient.defaults.headers.Authorization = `Bearer ${access_token}`;\n        await AsyncStorage.default.setItem('token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n      } catch (error) {\n        console.error('Registration error:', error);\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        setUser(null);\n        setToken(null);\n        delete _servicesApi.apiClient.defaults.headers.Authorization;\n        await AsyncStorage.default.removeItem('token');\n        await AsyncStorage.default.removeItem('user');\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":121,"map":[[13,2,28,0,"exports"],[13,9,28,0],[13,10,28,0,"AuthProvider"],[13,22,28,0],[13,25,28,0,"AuthProvider"],[13,37,28,0],[14,2,120,0,"exports"],[14,9,120,0],[14,10,120,0,"useAuth"],[14,17,120,0],[14,20,120,0,"useAuth"],[14,27,120,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[16,42,2,0],[16,45,2,0,"require"],[16,52,2,0],[16,53,2,0,"_dependencyMap"],[16,67,2,0],[17,2,2,0],[17,6,2,0,"AsyncStorage"],[17,18,2,0],[17,21,2,0,"_interopDefault"],[17,36,2,0],[17,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[17,73,2,0],[18,2,3,0],[18,6,3,0,"_servicesApi"],[18,18,3,0],[18,21,3,0,"require"],[18,28,3,0],[18,29,3,0,"_dependencyMap"],[18,43,3,0],[19,2,3,44],[19,6,3,44,"_reactJsxDevRuntime"],[19,25,3,44],[19,28,3,44,"require"],[19,35,3,44],[19,36,3,44,"_dependencyMap"],[19,50,3,44],[20,2,22,0],[20,8,22,6,"AuthContext"],[20,19,22,17],[20,35,22,20],[20,39,22,20,"createContext"],[20,45,22,33],[20,46,22,33,"createContext"],[20,59,22,33],[20,61,22,63,"undefined"],[20,70,22,72],[20,71,22,73],[21,2,28,7],[21,11,28,16,"AuthProvider"],[21,23,28,28,"AuthProvider"],[21,24,28,29],[22,4,28,31,"children"],[23,2,28,59],[23,3,28,60],[23,5,28,62],[24,4,29,2],[24,10,29,8],[24,11,29,9,"user"],[24,15,29,13],[24,17,29,15,"setUser"],[24,24,29,22],[24,25,29,23],[24,28,29,26],[24,32,29,26,"useState"],[24,38,29,34],[24,39,29,34,"useState"],[24,47,29,34],[24,49,29,48],[24,53,29,52],[24,54,29,53],[25,4,30,2],[25,10,30,8],[25,11,30,9,"token"],[25,16,30,14],[25,18,30,16,"setToken"],[25,26,30,24],[25,27,30,25],[25,30,30,28],[25,34,30,28,"useState"],[25,40,30,36],[25,41,30,36,"useState"],[25,49,30,36],[25,51,30,52],[25,55,30,56],[25,56,30,57],[26,4,31,2],[26,10,31,8],[26,11,31,9,"loading"],[26,18,31,16],[26,20,31,18,"setLoading"],[26,30,31,28],[26,31,31,29],[26,34,31,32],[26,38,31,32,"useState"],[26,44,31,40],[26,45,31,40,"useState"],[26,53,31,40],[26,55,31,41],[26,59,31,45],[26,60,31,46],[27,4,33,2],[27,8,33,2,"useEffect"],[27,14,33,11],[27,15,33,11,"useEffect"],[27,24,33,11],[27,26,33,12],[27,32,33,18],[28,6,34,4,"loadStoredAuth"],[28,20,34,18],[28,21,34,19],[28,22,34,20],[29,4,35,2],[29,5,35,3],[29,7,35,5],[29,9,35,7],[29,10,35,8],[30,4,37,2],[30,10,37,8,"loadStoredAuth"],[30,24,37,22],[30,27,37,25],[30,33,37,25,"loadStoredAuth"],[30,34,37,25],[30,39,37,37],[31,6,38,4],[31,10,38,8],[32,8,39,6],[32,14,39,12,"storedToken"],[32,25,39,23],[32,28,39,26],[32,34,39,32,"AsyncStorage"],[32,46,39,44],[32,47,39,44,"default"],[32,54,39,44],[32,55,39,45,"getItem"],[32,62,39,52],[32,63,39,53],[32,70,39,60],[32,71,39,61],[33,8,40,6],[33,14,40,12,"storedUser"],[33,24,40,22],[33,27,40,25],[33,33,40,31,"AsyncStorage"],[33,45,40,43],[33,46,40,43,"default"],[33,53,40,43],[33,54,40,44,"getItem"],[33,61,40,51],[33,62,40,52],[33,68,40,58],[33,69,40,59],[34,8,42,6],[34,12,42,10,"storedToken"],[34,23,42,21],[34,27,42,25,"storedUser"],[34,37,42,35],[34,39,42,37],[35,10,43,8,"setToken"],[35,18,43,16],[35,19,43,17,"storedToken"],[35,30,43,28],[35,31,43,29],[36,10,44,8,"setUser"],[36,17,44,15],[36,18,44,16,"JSON"],[36,22,44,20],[36,23,44,21,"parse"],[36,28,44,26],[36,29,44,27,"storedUser"],[36,39,44,37],[36,40,44,38],[36,41,44,39],[37,10,45,8,"apiClient"],[37,22,45,17],[37,23,45,17,"apiClient"],[37,32,45,17],[37,33,45,18,"defaults"],[37,41,45,26],[37,42,45,27,"headers"],[37,49,45,34],[37,50,45,35,"Authorization"],[37,63,45,48],[37,66,45,51],[37,76,45,61,"storedToken"],[37,87,45,72],[37,89,45,74],[38,8,46,6],[39,6,47,4],[39,7,47,5],[39,8,47,6],[39,15,47,13,"error"],[39,20,47,18],[39,22,47,20],[40,8,48,6,"console"],[40,15,48,13],[40,16,48,14,"error"],[40,21,48,19],[40,22,48,20],[40,50,48,48],[40,52,48,50,"error"],[40,57,48,55],[40,58,48,56],[41,6,49,4],[41,7,49,5],[41,16,49,14],[42,8,50,6,"setLoading"],[42,18,50,16],[42,19,50,17],[42,24,50,22],[42,25,50,23],[43,6,51,4],[44,4,52,2],[44,5,52,3],[45,4,54,2],[45,10,54,8,"login"],[45,15,54,13],[45,18,54,16],[45,24,54,16,"login"],[45,25,54,23,"email"],[45,30,54,36],[45,32,54,38,"password"],[45,40,54,54],[45,45,54,59],[46,6,55,4],[46,10,55,8],[47,8,56,6],[47,14,56,12,"response"],[47,22,56,20],[47,25,56,23],[47,31,56,29,"apiClient"],[47,43,56,38],[47,44,56,38,"apiClient"],[47,53,56,38],[47,54,56,39,"post"],[47,58,56,43],[47,59,56,44],[47,72,56,57],[47,74,56,59],[48,10,56,61,"email"],[48,15,56,66],[49,10,56,68,"password"],[50,8,56,77],[50,9,56,78],[50,10,56,79],[51,8,57,6],[51,14,57,12],[52,10,57,14,"access_token"],[52,22,57,26],[53,10,57,28,"user"],[53,14,57,32],[53,16,57,34,"userData"],[54,8,57,43],[54,9,57,44],[54,12,57,47,"response"],[54,20,57,55],[54,21,57,56,"data"],[54,25,57,60],[55,8,59,6,"setToken"],[55,16,59,14],[55,17,59,15,"access_token"],[55,29,59,27],[55,30,59,28],[56,8,60,6,"setUser"],[56,15,60,13],[56,16,60,14,"userData"],[56,24,60,22],[56,25,60,23],[57,8,61,6,"apiClient"],[57,20,61,15],[57,21,61,15,"apiClient"],[57,30,61,15],[57,31,61,16,"defaults"],[57,39,61,24],[57,40,61,25,"headers"],[57,47,61,32],[57,48,61,33,"Authorization"],[57,61,61,46],[57,64,61,49],[57,74,61,59,"access_token"],[57,86,61,71],[57,88,61,73],[58,8,63,6],[58,14,63,12,"AsyncStorage"],[58,26,63,24],[58,27,63,24,"default"],[58,34,63,24],[58,35,63,25,"setItem"],[58,42,63,32],[58,43,63,33],[58,50,63,40],[58,52,63,42,"access_token"],[58,64,63,54],[58,65,63,55],[59,8,64,6],[59,14,64,12,"AsyncStorage"],[59,26,64,24],[59,27,64,24,"default"],[59,34,64,24],[59,35,64,25,"setItem"],[59,42,64,32],[59,43,64,33],[59,49,64,39],[59,51,64,41,"JSON"],[59,55,64,45],[59,56,64,46,"stringify"],[59,65,64,55],[59,66,64,56,"userData"],[59,74,64,64],[59,75,64,65],[59,76,64,66],[60,6,65,4],[60,7,65,5],[60,8,65,6],[60,15,65,13,"error"],[60,20,65,18],[60,22,65,20],[61,8,66,6,"console"],[61,15,66,13],[61,16,66,14,"error"],[61,21,66,19],[61,22,66,20],[61,36,66,34],[61,38,66,36,"error"],[61,43,66,41],[61,44,66,42],[62,8,67,6],[62,14,67,12,"error"],[62,19,67,17],[63,6,68,4],[64,4,69,2],[64,5,69,3],[65,4,71,2],[65,10,71,8,"register"],[65,18,71,16],[65,21,71,19],[65,27,71,19,"register"],[65,28,71,26,"email"],[65,33,71,39],[65,35,71,41,"password"],[65,43,71,57],[65,45,71,59,"name"],[65,49,71,71],[65,51,71,73,"dailyGoal"],[65,60,71,82],[65,63,71,85],[65,65,71,87],[65,70,71,92],[66,6,72,4],[66,10,72,8],[67,8,73,6],[67,14,73,12,"response"],[67,22,73,20],[67,25,73,23],[67,31,73,29,"apiClient"],[67,43,73,38],[67,44,73,38,"apiClient"],[67,53,73,38],[67,54,73,39,"post"],[67,58,73,43],[67,59,73,44],[67,75,73,60],[67,77,73,62],[68,10,74,8,"email"],[68,15,74,13],[69,10,75,8,"password"],[69,18,75,16],[70,10,76,8,"name"],[70,14,76,12],[71,10,77,8,"daily_sugar_goal"],[71,26,77,24],[71,28,77,26,"dailyGoal"],[72,8,78,6],[72,9,78,7],[72,10,78,8],[73,8,79,6],[73,14,79,12],[74,10,79,14,"access_token"],[74,22,79,26],[75,10,79,28,"user"],[75,14,79,32],[75,16,79,34,"userData"],[76,8,79,43],[76,9,79,44],[76,12,79,47,"response"],[76,20,79,55],[76,21,79,56,"data"],[76,25,79,60],[77,8,81,6,"setToken"],[77,16,81,14],[77,17,81,15,"access_token"],[77,29,81,27],[77,30,81,28],[78,8,82,6,"setUser"],[78,15,82,13],[78,16,82,14,"userData"],[78,24,82,22],[78,25,82,23],[79,8,83,6,"apiClient"],[79,20,83,15],[79,21,83,15,"apiClient"],[79,30,83,15],[79,31,83,16,"defaults"],[79,39,83,24],[79,40,83,25,"headers"],[79,47,83,32],[79,48,83,33,"Authorization"],[79,61,83,46],[79,64,83,49],[79,74,83,59,"access_token"],[79,86,83,71],[79,88,83,73],[80,8,85,6],[80,14,85,12,"AsyncStorage"],[80,26,85,24],[80,27,85,24,"default"],[80,34,85,24],[80,35,85,25,"setItem"],[80,42,85,32],[80,43,85,33],[80,50,85,40],[80,52,85,42,"access_token"],[80,64,85,54],[80,65,85,55],[81,8,86,6],[81,14,86,12,"AsyncStorage"],[81,26,86,24],[81,27,86,24,"default"],[81,34,86,24],[81,35,86,25,"setItem"],[81,42,86,32],[81,43,86,33],[81,49,86,39],[81,51,86,41,"JSON"],[81,55,86,45],[81,56,86,46,"stringify"],[81,65,86,55],[81,66,86,56,"userData"],[81,74,86,64],[81,75,86,65],[81,76,86,66],[82,6,87,4],[82,7,87,5],[82,8,87,6],[82,15,87,13,"error"],[82,20,87,18],[82,22,87,20],[83,8,88,6,"console"],[83,15,88,13],[83,16,88,14,"error"],[83,21,88,19],[83,22,88,20],[83,43,88,41],[83,45,88,43,"error"],[83,50,88,48],[83,51,88,49],[84,8,89,6],[84,14,89,12,"error"],[84,19,89,17],[85,6,90,4],[86,4,91,2],[86,5,91,3],[87,4,93,2],[87,10,93,8,"logout"],[87,16,93,14],[87,19,93,17],[87,25,93,17,"logout"],[87,26,93,17],[87,31,93,29],[88,6,94,4],[88,10,94,8],[89,8,95,6,"setUser"],[89,15,95,13],[89,16,95,14],[89,20,95,18],[89,21,95,19],[90,8,96,6,"setToken"],[90,16,96,14],[90,17,96,15],[90,21,96,19],[90,22,96,20],[91,8,97,6],[91,15,97,13,"apiClient"],[91,27,97,22],[91,28,97,22,"apiClient"],[91,37,97,22],[91,38,97,23,"defaults"],[91,46,97,31],[91,47,97,32,"headers"],[91,54,97,39],[91,55,97,40,"Authorization"],[91,68,97,53],[92,8,98,6],[92,14,98,12,"AsyncStorage"],[92,26,98,24],[92,27,98,24,"default"],[92,34,98,24],[92,35,98,25,"removeItem"],[92,45,98,35],[92,46,98,36],[92,53,98,43],[92,54,98,44],[93,8,99,6],[93,14,99,12,"AsyncStorage"],[93,26,99,24],[93,27,99,24,"default"],[93,34,99,24],[93,35,99,25,"removeItem"],[93,45,99,35],[93,46,99,36],[93,52,99,42],[93,53,99,43],[94,6,100,4],[94,7,100,5],[94,8,100,6],[94,15,100,13,"error"],[94,20,100,18],[94,22,100,20],[95,8,101,6,"console"],[95,15,101,13],[95,16,101,14,"error"],[95,21,101,19],[95,22,101,20],[95,37,101,35],[95,39,101,37,"error"],[95,44,101,42],[95,45,101,43],[96,6,102,4],[97,4,103,2],[97,5,103,3],[98,4,105,2],[98,24,106,4],[98,28,106,4,"_reactJsxDevRuntime"],[98,47,106,4],[98,48,106,4,"jsxDEV"],[98,54,106,4],[98,56,106,5,"AuthContext"],[98,67,106,16],[98,68,106,17,"Provider"],[98,76,106,25],[99,6,107,6,"value"],[99,11,107,11],[99,13,107,13],[100,8,108,8,"user"],[100,12,108,12],[101,8,109,8,"token"],[101,13,109,13],[102,8,110,8,"login"],[102,13,110,13],[103,8,111,8,"register"],[103,16,111,16],[104,8,112,8,"logout"],[104,14,112,14],[105,8,113,8,"loading"],[106,6,114,6],[106,7,114,8],[107,6,114,8,"children"],[107,14,114,8],[107,16,115,7,"children"],[108,4,115,15],[109,6,115,15,"fileName"],[109,14,115,15],[109,16,115,15,"_jsxFileName"],[109,28,115,15],[110,6,115,15,"lineNumber"],[110,16,115,15],[111,6,115,15,"columnNumber"],[111,18,115,15],[112,4,115,15],[112,11,116,26],[112,12,116,27],[113,2,118,0],[114,2,120,7],[114,11,120,16,"useAuth"],[114,18,120,23,"useAuth"],[114,19,120,23],[114,21,120,26],[115,4,121,2],[115,10,121,8,"context"],[115,17,121,15],[115,20,121,18],[115,24,121,18,"useContext"],[115,30,121,28],[115,31,121,28,"useContext"],[115,41,121,28],[115,43,121,29,"AuthContext"],[115,54,121,40],[115,55,121,41],[116,4,122,2],[116,8,122,6,"context"],[116,15,122,13],[116,20,122,18,"undefined"],[116,29,122,27],[116,31,122,29],[117,6,123,4],[117,12,123,10],[117,16,123,14,"Error"],[117,21,123,19],[117,22,123,20],[117,67,123,65],[117,68,123,66],[118,4,124,2],[119,4,125,2],[119,11,125,9,"context"],[119,18,125,16],[120,2,126,0],[121,0,126,1],[121,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","login","register","logout","useAuth"],"mappings":"AAA;OC2B;YCK;GDE;yBEE;GFe;gBGE;GHe;mBIE;GJoB;iBKE;GLU;CDe;OOE"},"hasCjsExports":false},"type":"js/module"}]}